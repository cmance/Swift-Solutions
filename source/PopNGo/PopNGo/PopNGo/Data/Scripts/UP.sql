-- CREATE DATABASE [PopNGoDB];

USE [PopNGoDB];

CREATE TABLE [PG_User] (
  [ID] INTEGER PRIMARY KEY IDENTITY(1, 1),
  [ASPNETUserID] NVARCHAR(255) NOT NULL
);

CREATE TABLE [FavoriteEvents] (
  [ID] INTEGER PRIMARY KEY IDENTITY(1, 1),
  [UserID] INTEGER NOT NULL,
  [EventID] INTEGER NOT NULL  -- Change this to NVARCHAR(255)
);

CREATE TABLE [EventHistory] (
  [ID] INTEGER PRIMARY KEY IDENTITY(1, 1),
  [UserID] INTEGER NOT NULL,
  [EventID] INTEGER NOT NULL,  -- Change this to NVARCHAR(255)
  [ViewedDate] DATETIME NOT NULL
);

CREATE TABLE [Event] (
  [ID] INTEGER PRIMARY KEY IDENTITY(1, 1),
  [ApiEventID] NVARCHAR(255) NOT NULL,
  [EventDate] DATETIME NOT NULL,
  [EventName] NVARCHAR(255) NOT NULL,
  [EventDescription] NVARCHAR(1000) NOT NULL,
  [EventLocation] NVARCHAR(255) NOT NULL,
  [EventImage] NVARCHAR(255)
);

CREATE TABLE [Tag] (
  [ID] INTEGER PRIMARY KEY IDENTITY(1, 1),
  [Name] NVARCHAR(255) NOT NULL,
  [BackgroundColor] NVARCHAR(255) NOT NULL,
  [TextColor] NVARCHAR(255) NOT NULL
);

ALTER TABLE [EventHistory] ADD CONSTRAINT FK_EventHistory_UserID FOREIGN KEY ([UserID]) REFERENCES [PG_User] ([ID]);
ALTER TABLE [EventHistory] ADD CONSTRAINT FK_EventHistory_EventID FOREIGN KEY ([EventID]) REFERENCES [Event] ([ID]);
ALTER TABLE [FavoriteEvents] ADD CONSTRAINT FK_FavoriteEvents_EventID FOREIGN KEY ([EventID]) REFERENCES [Event] ([ID]);
ALTER TABLE [FavoriteEvents] ADD CONSTRAINT FK_FavoriteEvents_UserID FOREIGN KEY ([UserID]) REFERENCES [PG_User] ([ID]);
